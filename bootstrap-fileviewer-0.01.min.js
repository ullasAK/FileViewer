/**
 * Jquery bootstrap plugin to view pdf and image files inine bowser itself 
 * Prerequisite 
 * 1. jquery 1.7 > above 
 * 2.Bootstrap 3.1.1 and aove 
 * 
 * How to 
 * 1.add this file in your project and include it in some common place(so that can be accessed though your application .
 * 2. add class inlinefileviewer to the elment on which click you wish to open a file .
 * 3. Define two attributes a) data-filename : file name  b) data-filepath: file realtive path 
 *  and  you are done 
 Ullas A K 
 */
 function initViewer(){$("body").undelegate(".inlinefileviewer","click").delegate(".inlinefileviewer","click",function(){openFileViewer($(this).attr("data-filename"),$(this).attr("data-filepath"))})}function openFileViewer(e,t){var n=e.substring(e.length-3);if(n.toUpperCase()==="JPG"||n.toUpperCase()==="PNG"||n.toUpperCase()==="GIF"||n.toUpperCase()==="PEG"){openFileInViewMode(t,e)}else if(n.toUpperCase()==="PDF"){openFileInViewMode(t,e)}else{$("#dialog-confirm-downloadfile").empty().remove();var r="<div class=' ' id='dialog-confirm-downloadfile'  title='Download file ' style='display: none;height: 50px'> <p><span class='ui-icon ui-icon-alert' style='float:left; margin:0 7px 20px 0;'></span>This type of file cant be opned .Do you want to download the file</p></div>";$("body").append(r);$("#dialog-confirm-downloadfile").dialog({resizable:false,height:215,modal:true,width:380,buttons:{Download:function(){fileDownload(t);$(this).dialog("close");$("#dialog-confirm-downloadfile").empty().remove()},Cancel:function(){$(this).dialog("close");$("#dialog-confirm-downloadfile").empty().remove()}}})}}function fileDownload(e){window.location=e}function openFileInViewMode(e,t){filerelpathfordownload=e;$.get(e).done(function(){$("#my_viewer_div").empty().remove();$("body").append("<div id='my_viewer_div'></div>");var n="	<div class='modal fade' id='doc_viewer_model_div' > <div class='modal-dialog' style='width:830px' > <div class='modal-content'> <div class='modal-body'> <span   data-dismiss='modal' class='fa fa-times-circle-o fa-2x' style='float:right;margin-top:-3%;margin-right:-3%;cursor:pointer;'></span><h4 class='modal-title' id='myModalLabel' style='color:#428BCA'>"+t+"</h4><div id='viewer_model_elements'></div> </div> </div> </div></div>";$("#my_viewer_div").append(n);var r="<a href='"+e+"' download id='download_file_from_src'>download</a> <iframe id='viewer' src = '"+e+"' width='790' height='650' allowfullscreen webkitallowfullscreen></iframe>";$("#doc_viewer_model_div").modal({backdrop:"static"});$("#viewer_model_elements").empty().append(r)}).fail(function(){alert("File cannot be loaded. Make sure the path is correct and file  exist.")})}
